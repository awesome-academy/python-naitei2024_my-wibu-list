{% extends "html/homepage.html" %}
{% load static %} {% load i18n %}
{% block notification %} {% endblock notification %}
{% block top_carousel %} {% endblock top_carousel %}
{% block anime_carousel %} {% endblock anime_carousel %}
{% block latest_updates %}
<section class="product-container">
  <!-- Product Image Section -->
  {% if product.image_url %}
  <div class="img-card">
    <img
      src="{{ product.image_url }}"
      height="100"
      width="100"
      alt="{{ product.name }}"
      class="featured-image"
    />
    <div class="small-card">
      <img
        src="{{ product.image_url }}"
        height="100"
        width="100"
        alt="Product Image 1"
        class="thumbnail-image"
      />
      <img
        src="{{ product.image_url }}"
        height="100"
        width="100"
        alt="Product Image 2"
        class="thumbnail-image"
      />
      <img
        src="{{ product.image_url }}"
        height="100"
        width="100"
        alt="Product Image 3"
        class="thumbnail-image"
      />
    </div>
  </div>
  {% else %}
  <div class="img-card">
    <img
      src="{% static 'images/gundam.jpg' %}"
      height="40"
      width="40"
      alt="{{ product.name }}"
      class="featured-image"
    />
    <div class="small-card">
      <img
        src="{% static 'images/gundam.jpg' %}"
        height="40"
        width="40"
        alt="Product Image 1"
        class="thumbnail-image"
      />
      <img
        src="{% static 'images/gundam.jpg' %}"
        height="40"
        width="40"
        alt="Product Image 2"
        class="thumbnail-image"
      />
      <img
        src="{% static 'images/gundam.jpg' %}"
        height="40"
        width="40"
        alt="Product Image 3"
        class="thumbnail-image"
      />
    </div>
  </div>
  {% endif %}
  <!-- Product Information Section -->
  <div class="product-info">
    <h3>{{ product.name }}</h3>
    <h5>{% trans "Price:" %} ₫{{ product.price }}</h5>
    <p>{{ product.description }}</p>
    <!-- Size Selection -->
    <div class="sizes">
      <p>{% trans "Size:" %}</p>
      <select name="size" id="size" class="size-option">
        {% for size in available_sizes %}
        <option value="{{ size }}">{{ size }}</option>
        {% endfor %}
      </select>
    </div>
    <!-- Quantity Selection and Action Buttons -->
    <div class="quantity">
      <input type="number" value="1" min="1" id="quantity-input" sl-in-cart="{{ product_quantity_in_cart }}" />
      <button
        id="add-to-cart-btn"
        data-url="{% url 'add_to_cart' %}"
        data-product-id="{{ product.pid }}"
        data-inventory="{{ product.inventory }}"
      >
        Add to cart
      </button>
      <button>{% trans "Buy Now" %}</button>
    </div>
    <!-- Delivery Information -->
    <div>
      <p>{% trans "Delivery:" %}</p>
      <p>
        {% trans "Free standard shipping on orders over ₫35,000 before tax, plus free returns." %}
      </p>
      <div class="delivery">
        <p>{% trans "TYPE" %}</p>
        <p>{% trans "HOW LONG" %}</p>
        <p>{% trans "HOW MUCH" %}</p>
      </div>
      <hr />
      <div class="delivery">
        <p>{% trans "Standard delivery" %}</p>
        <p>{% trans "1-4 business days" %}</p>
        <p>₫4,500</p>
      </div>
      <hr />
      <div class="delivery">
        <p>{% trans "Express delivery" %}</p>
        <p>{% trans "1 business day" %}</p>
        <p>₫10,000</p>
      </div>
      <hr />
      <div class="delivery">
        <p>{% trans "Pick up in store" %}</p>
        <p>{% trans "1-3 business days" %}</p>
        <p>{% trans "Free" %}</p>
      </div>
    </div>
  </div>
  <!-- Notification Modal -->
  <div id="notification-modal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">"x"</span>
      <div class="notification-title">{% trans "NOTIFICATION" %}</div>
      <div class="notification-message">
        {% trans "Successfully added to cart" %}
      </div>
      <img
        src="{% static 'images/oke.webp' %}"
        alt="{{ product.name }}"
        class="notification-image"
        height="150"
        width="350"
      />
      <a href="{% url 'cart' %}" class="view-cart-btn"
        >{% trans "VIEW CART" %}</a
      >
    </div>
  </div>
  <div id="error-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal()">"x"</span>
        <div class="notification-title">{% trans "NOTIFICATION" %}</div>
        <div class="notification-message">
          {% trans "Failed to add to cart" %}
        </div>
        <img
          src="{% static 'images/nono.webp' %}"
          alt="{{ product.name }}"
          class="notification-image"
          height="150"
          width="350"
        />
        <a href="{% url 'product_detail' product.pid %}" class="try-again-btn"
          >{% trans "TRY AGAIN" %}</a
        >
      </div>
  </div>
  <!-- Custom Styles -->
  <link rel="stylesheet" href="{% static 'css/add_to_cart.css' %}" />
  <!-- Script to Handle Cart Operations -->
  <script src="{% static 'js/product_detail.js' %}"></script>
</section>
{% endblock latest_updates %}
